{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ai-vector-ui-generator/schema/ui_asset.schema.json",
  "title": "Vector UI Asset",
  "oneOf": [
    { "$ref": "#/definitions/buttonAsset" },
    { "$ref": "#/definitions/screenAsset" }
  ],
  "definitions": {
    "token": {
      "type": "string",
      "pattern": "^[a-z][a-z0-9_-]*(\\.[A-Za-z0-9_-]+)+$",
      "minLength": 3,
      "maxLength": 64
    },
    "finiteNumber": {
      "type": "number",
      "multipleOf": 0.01,
      "minimum": -4096,
      "maximum": 4096
    },
    "positiveLength": {
      "type": "number",
      "multipleOf": 0.01,
      "exclusiveMinimum": 0,
      "maximum": 4096
    },
    "nonNegativeLength": {
      "type": "number",
      "multipleOf": 0.01,
      "minimum": 0,
      "maximum": 4096
    },
    "viewBox": {
      "type": "array",
      "minItems": 4,
      "maxItems": 4,
      "items": {
        "type": "integer",
        "minimum": 0,
        "maximum": 8192
      }
    },
    "metadata": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": { "type": "string", "maxLength": 120 },
        "description": { "type": "string", "maxLength": 500 },
        "tags": {
          "type": "array",
          "items": { "type": "string", "maxLength": 32 },
          "maxItems": 16,
          "uniqueItems": true
        }
      }
    },
    "rectBase": {
      "type": "object",
      "additionalProperties": false,
      "required": ["x", "y", "width", "height"],
      "properties": {
        "x": { "$ref": "#/definitions/finiteNumber" },
        "y": { "$ref": "#/definitions/finiteNumber" },
        "width": { "$ref": "#/definitions/positiveLength" },
        "height": { "$ref": "#/definitions/positiveLength" },
        "radius": { "$ref": "#/definitions/nonNegativeLength" }
      }
    },
    "roundedRect": {
      "allOf": [
        { "$ref": "#/definitions/rectBase" },
        {
          "type": "object",
          "required": ["radius"],
          "properties": {
            "radius": { "$ref": "#/definitions/nonNegativeLength" }
          }
        }
      ]
    },
    "textRect": { "$ref": "#/definitions/rectBase" },
    "style": {
      "type": "object",
      "additionalProperties": false,
      "required": ["fill"],
      "properties": {
        "fill": { "$ref": "#/definitions/token" },
        "stroke": { "$ref": "#/definitions/token" },
        "strokeWidth": { "$ref": "#/definitions/nonNegativeLength" },
        "glow": { "$ref": "#/definitions/token" },
        "blendMode": {
          "type": "string",
          "enum": ["normal", "screen", "multiply", "overlay", "soft-light"]
        }
      }
    },
    "textContent": {
      "type": "object",
      "additionalProperties": false,
      "required": ["value", "font", "size", "maxLines", "overflow", "fit"],
      "properties": {
        "value": { "type": "string", "minLength": 1, "maxLength": 280 },
        "font": { "$ref": "#/definitions/token" },
        "size": { "$ref": "#/definitions/positiveLength" },
        "maxLines": { "type": "integer", "minimum": 1, "maximum": 6 },
        "overflow": { "type": "string", "enum": ["ellipsis", "clip"] },
        "fit": { "type": "string", "enum": ["none", "shrink"] },
        "align": { "type": "string", "enum": ["left", "center", "right"] }
      }
    },
    "padding": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "top": { "$ref": "#/definitions/nonNegativeLength" },
        "right": { "$ref": "#/definitions/nonNegativeLength" },
        "bottom": { "$ref": "#/definitions/nonNegativeLength" },
        "left": { "$ref": "#/definitions/nonNegativeLength" }
      }
    },
    "layoutRow": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "gap": { "$ref": "#/definitions/nonNegativeLength" },
        "align": { "type": "string", "enum": ["start", "center", "end", "stretch"] },
        "padding": { "$ref": "#/definitions/padding" }
      }
    },
    "layoutColumn": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "gap": { "$ref": "#/definitions/nonNegativeLength" },
        "align": { "type": "string", "enum": ["start", "center", "end", "stretch"] },
        "padding": { "$ref": "#/definitions/padding" }
      }
    },
    "layoutGrid": {
      "type": "object",
      "additionalProperties": false,
      "required": ["columns"],
      "properties": {
        "columns": { "type": "integer", "minimum": 1, "maximum": 64 },
        "rowGap": { "$ref": "#/definitions/nonNegativeLength" },
        "colGap": { "$ref": "#/definitions/nonNegativeLength" },
        "align": { "type": "string", "enum": ["start", "center", "end", "stretch"] },
        "padding": { "$ref": "#/definitions/padding" }
      }
    },
    "layoutItem": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "componentId", "size"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "componentId": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "size": { "$ref": "#/definitions/size" }
      }
    },
    "slot": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "rect"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "name": { "type": "string", "maxLength": 80 },
        "rect": { "$ref": "#/definitions/rectBase" },
        "description": { "type": "string", "maxLength": 200 }
      }
    },
    "rectLayer": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "shape", "rect", "style"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "name": { "type": "string", "maxLength": 80 },
        "shape": { "const": "roundedRect" },
        "rect": { "$ref": "#/definitions/roundedRect" },
        "style": { "$ref": "#/definitions/style" },
        "zIndex": { "type": "integer", "minimum": 0, "maximum": 255 }
      }
    },
    "textLayer": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "shape", "rect", "style", "text"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "name": { "type": "string", "maxLength": 80 },
        "shape": { "const": "text" },
        "rect": { "$ref": "#/definitions/textRect" },
        "style": { "$ref": "#/definitions/style" },
        "text": { "$ref": "#/definitions/textContent" },
        "zIndex": { "type": "integer", "minimum": 0, "maximum": 255 }
      }
    },
    "layoutRowLayer": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "shape", "rect", "layout", "items"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "name": { "type": "string", "maxLength": 80 },
        "shape": { "const": "layoutRow" },
        "rect": { "$ref": "#/definitions/rectBase" },
        "layout": { "$ref": "#/definitions/layoutRow" },
        "items": {
          "type": "array",
          "minItems": 1,
          "maxItems": 128,
          "items": { "$ref": "#/definitions/layoutItem" }
        },
        "zIndex": { "type": "integer", "minimum": 0, "maximum": 255 }
      }
    },
    "layoutColumnLayer": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "shape", "rect", "layout", "items"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "name": { "type": "string", "maxLength": 80 },
        "shape": { "const": "layoutColumn" },
        "rect": { "$ref": "#/definitions/rectBase" },
        "layout": { "$ref": "#/definitions/layoutColumn" },
        "items": {
          "type": "array",
          "minItems": 1,
          "maxItems": 128,
          "items": { "$ref": "#/definitions/layoutItem" }
        },
        "zIndex": { "type": "integer", "minimum": 0, "maximum": 255 }
      }
    },
    "layoutGridLayer": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "shape", "rect", "layout", "items"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "name": { "type": "string", "maxLength": 80 },
        "shape": { "const": "layoutGrid" },
        "rect": { "$ref": "#/definitions/rectBase" },
        "layout": { "$ref": "#/definitions/layoutGrid" },
        "items": {
          "type": "array",
          "minItems": 1,
          "maxItems": 256,
          "items": { "$ref": "#/definitions/layoutItem" }
        },
        "zIndex": { "type": "integer", "minimum": 0, "maximum": 255 }
      }
    },
    "layer": {
      "oneOf": [
        { "$ref": "#/definitions/rectLayer" },
        { "$ref": "#/definitions/textLayer" },
        { "$ref": "#/definitions/layoutRowLayer" },
        { "$ref": "#/definitions/layoutColumnLayer" },
        { "$ref": "#/definitions/layoutGridLayer" }
      ]
    },
    "canvas": {
      "type": "object",
      "additionalProperties": false,
      "required": ["width", "height"],
      "properties": {
        "width": { "type": "integer", "minimum": 1, "maximum": 8192 },
        "height": { "type": "integer", "minimum": 1, "maximum": 8192 },
        "safeArea": { "$ref": "#/definitions/safeArea" }
      }
    },
    "safeArea": {
      "type": "object",
      "additionalProperties": false,
      "required": ["x", "y", "width", "height"],
      "properties": {
        "x": { "type": "integer", "minimum": 0, "maximum": 8192 },
        "y": { "type": "integer", "minimum": 0, "maximum": 8192 },
        "width": { "type": "integer", "minimum": 1, "maximum": 8192 },
        "height": { "type": "integer", "minimum": 1, "maximum": 8192 }
      }
    },
    "component": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "viewBox", "layers"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "name": { "type": "string", "maxLength": 80 },
        "viewBox": { "$ref": "#/definitions/viewBox" },
        "layers": {
          "type": "array",
          "minItems": 1,
          "maxItems": 32,
          "items": { "$ref": "#/definitions/layer" }
        }
      }
    },
    "offset": {
      "type": "object",
      "additionalProperties": false,
      "required": ["x", "y"],
      "properties": {
        "x": { "$ref": "#/definitions/finiteNumber" },
        "y": { "$ref": "#/definitions/finiteNumber" }
      }
    },
    "size": {
      "type": "object",
      "additionalProperties": false,
      "required": ["width", "height"],
      "properties": {
        "width": { "$ref": "#/definitions/positiveLength" },
        "height": { "$ref": "#/definitions/positiveLength" }
      }
    },
    "instance": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "componentId", "anchorTo", "anchor", "offset", "size"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "componentId": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "anchorTo": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "anchor": {
          "type": "string",
          "enum": [
            "topLeft",
            "top",
            "topRight",
            "left",
            "center",
            "right",
            "bottomLeft",
            "bottom",
            "bottomRight"
          ]
        },
        "offset": { "$ref": "#/definitions/offset" },
        "size": { "$ref": "#/definitions/size" },
        "zIndex": { "type": "integer", "minimum": 0, "maximum": 255 }
      }
    },
    "buttonAsset": {
      "type": "object",
      "additionalProperties": false,
      "required": ["assetType", "viewBox", "layers"],
      "properties": {
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "assetType": { "const": "button" },
        "viewBox": { "$ref": "#/definitions/viewBox" },
        "metadata": { "$ref": "#/definitions/metadata" },
        "layers": {
          "type": "array",
          "minItems": 1,
          "maxItems": 16,
          "items": { "$ref": "#/definitions/layer" }
        }
      }
    },
    "screenAsset": {
      "type": "object",
      "additionalProperties": false,
      "required": ["assetType", "canvas", "components", "instances"],
      "properties": {
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "assetType": { "const": "screen" },
        "patternId": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "minLength": 1,
          "maxLength": 64
        },
        "metadata": { "$ref": "#/definitions/metadata" },
        "canvas": { "$ref": "#/definitions/canvas" },
        "components": {
          "type": "array",
          "minItems": 1,
          "maxItems": 64,
          "items": { "$ref": "#/definitions/component" }
        },
        "slots": {
          "type": "array",
          "minItems": 0,
          "maxItems": 64,
          "items": { "$ref": "#/definitions/slot" }
        },
        "instances": {
          "type": "array",
          "minItems": 1,
          "maxItems": 128,
          "items": { "$ref": "#/definitions/instance" }
        }
      }
    }
  }
}
